<!doctype html><html lang="en"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width,initial-scale=1"><link rel="shortcut icon" href="img/logo/logo.png" type="image/png"><link rel="apple-touch-icon" href="img/logo/logo.png"><link rel="stylesheet" href="css/style.min.css"><title>至尊柏青哥</title></head><body><div id="app"><audio class="o-music" :src="`music/music0${musicId}.mp3`" autoplay loop></audio><nav class="c-navbar"><div class="c-navbar__logo-wrap"><div class="c-navbar__logo"><img src="img/logo/logo.png" :alt="config.data.title"></div><h1 class="c-navbar__title u-title">{{ config.data.title }}</h1></div></nav><main class="l-main"><div class="container-fluid"><div class="row"><div class="col-7 l-main__jackpot"><template v-for="(item, index) in list.data" :key="item.name"><jackpot :data="item" :name="config.data.jackpotName[index]" :win-data="winData"></jackpot></template><div class="c-win" :class="{ 'is-active': isWin }"><div class="c-win__coin-wrap"><video class="c-win__coin" :key="coinSrc" autoplay muted><source :src="`${coinSrc}.webm`" type="video/webm"><source :src="`${coinSrc}.mov`" type="video/mp4"></video></div><h2 class="c-win__title">恭喜中獎！</h2></div></div><div class="col-5 l-main__table"><table class="c-table"><thead><tr><th>時間</th><th>JP</th><th>分數</th><th>地區</th></tr></thead><tbody><tr class="c-table__tr" v-for="(item, index) in recordList.data" :class="`--${classFilter(item.name)}`"><td><p>{{ spaceFilter(item.time)[0] }}</p><p>{{ spaceFilter(item.time)[1] }}</p></td><td>{{ nameFilter(item.name) }}</td><td>{{ item.score }}</td><td><p>{{ spaceFilter(item.location)[1] }}</p><p>{{ spaceFilter(item.location)[2] }}</p></td></tr></tbody></table></div></div></div></main></div><script src="js/axios.min.js"></script><script src="js/vue.global.prod.js"></script><script src="js/coin.min.js"></script><script src="js/gsap.min.js"></script><script id="jackpot" type="text/x-template"><div class="c-jackpot" ref="jackpot" :class="{ 'is-active': props.winData.jackpot_id == props.data.jackpot_id }">
        <div class="c-jackpot__wrap" ref="jackpotWrap">
          <div class="c-jackpot__name">{{ props.name }}</div>
          <div class="c-jackpot__score-wrap">
            <div class="c-jackpot__score">{{ props.data.win_score }}</div>
            <div class="c-jackpot__range-wrap">
              <p class="c-jackpot__machine">MEGA</p>
              <p class="c-jackpot__range --min">{{ props.data.min_value }}</p>
              <p class="c-jackpot__dash">—</p>
              <p class="c-jackpot__range --max">{{ props.data.max_value }}</p>
            </div>
          </div>
        </div>
      </div></script><script>const{ref,computed,watch}=Vue,Jackpot={template:"#jackpot",props:{data:{type:Object,default:()=>({})},name:{type:Function,default:String},winData:{type:Object,default:()=>({})}},setup(e){const l=ref(null);onMounted(()=>{(()=>{const a=(t,e)=>Math.floor(Math.random()*(e-t)+t);setInterval(()=>{var t=a(-100,100),e=a(-20,20);l.value.style.transform=`translate(${t}px, ${e}px)`},2e3)})()});const a=ref(null);let o;return watch(()=>e.winData.jackpot_id,t=>{t&&t===e.data.jackpot_id?(a.value.style.transform="",o=gsap.timeline(),o.fromTo(a.value,{position:"fixed",left:a.value.offsetLeft,top:a.value.offsetTop,scale:0,rotationY:0,zIndex:99999},{left:window.innerWidth/2-a.value.clientWidth+"px",top:window.innerHeight/2-a.value.clientHeight+"px",scale:1.5,rotationY:"360deg",duration:1,delay:1===e.winData.videoType?4.2:5.5})):(o&&o.kill(),a.value.style.position="",a.value.style.left="",a.value.style.top="",a.value.style.transform="",a.value.style.zIndex="")}),{jackpot:a,jackpotWrap:l,props:e}}}</script><script>const{reactive,onMounted}=Vue,App={components:{Jackpot:Jackpot},setup(){const e=reactive({data:[]}),t=reactive({data:[]}),d=reactive({data:[]});let i=!1;const o=()=>{axios.get(p.data.api).then(a=>{e.data=a.data,t.data=e.data.filter(a=>1===a.winning_status),0===d.data.length?d.data=t.data:d.data.map(e=>{t.data.map(a=>{e.id!==a.id&&d.data.push(a)})}),0<d.data.length&&!1===i&&(i=!0,setTimeout(()=>{m(2,d.data.shift())},100))})},n=reactive({data:[]}),c=()=>{axios.get(p.data.apiRecord).then(a=>{n.data=a.data})},p=reactive({data:{}});onMounted(()=>{axios.get("../database/config.json").then(a=>{p.data=a.data;setInterval(()=>{o()},500),setInterval(()=>{c()},12e4);o(),c()})});const u=ref(!1),l=reactive({name:"",videoType:""}),s=ref("");let v,r;const m=(a,e)=>{u.value=!u.value,v=u.value?(l.jackpot_id=e.jackpot_id,l.videoType=e.videoType,1===a?(s.value="video/video01",r=setTimeout(()=>{s.value=""},1e4),setTimeout(()=>{u.value=!1,l.jackpot_id="",l.videoType=""},12500)):(s.value="video/video02",l.videoType=2,setTimeout(()=>{u.value=!1,l.jackpot_id="",l.videoType="",s.value="",0<d.data.length?setTimeout(()=>{m(2,d.data.shift())},1200):i=!1},12500))):(u.value=!1,l.jackpot_id="",l.videoType="",s.value="",clearTimeout(v),clearTimeout(r),null)},T=ref(3);return{config:p,list:e,recordList:n,classFilter:a=>{return{"至尊JP1":"JP1","至尊JP2":"JP2","至尊JP 3":"JP3","至尊招財":"JP4","至尊進寶":"JP5"}[a]},nameFilter:a=>{return{"至尊JP1":p.data.jackpotName[0],"至尊JP2":p.data.jackpotName[1],"至尊JP 3":p.data.jackpotName[2],"至尊招財":p.data.jackpotName[3],"至尊進寶":p.data.jackpotName[4]}[a]},spaceFilter:a=>a.split(" "),isWin:u,winData:l,coinSrc:s,handleWin:m,musicId:T,handleMusic:a=>{T.value=a},handleMute:()=>{T.value=""}}}};Vue.createApp(App).mount("#app")</script></body></html>